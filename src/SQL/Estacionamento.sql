
  CREATE TABLE PROPRIETARIO(
    CD_PROPRIETARIO NUMBER(9) PRIMARY KEY,
    NM_PROPRIETARIO VARCHAR2(90) NOT NULL,
    TEL_PROPRIETARIO  NUMBER(14) NOT NULL,
    DS_ENDERECO VARCHAR2(255)  NOT NULL,
    NR_CPF NUMBER(12) NOT NULL
  );

  CREATE TABLE MARCA(
    CD_MARCA NUMBER(9) PRIMARY KEY,
    DS_MARCA VARCHAR(90) NOT NULL
  );
  CREATE TABLE TABELA_TIPO(
    CD_TABELA_TIPO NUMBER(9) PRIMARY KEY,
    DS_TIPO_VEICULO VARCHAR2(90) NOT NULL,
    PR_P15 NUMBER(5,2) NOT NULL,
    PR_P30 NUMBER(5,2) NOT NULL,
    PR_P60 NUMBER(5,2) NOT NULL,
    PR_D15 NUMBER(5,2) NOT NULL,
    PR_PDIA NUMBER(5,2) NOT NULL,
    PR_PMES NUMBER(5,2)
  );
  CREATE TABLE MODELO(
    CD_MODELO NUMBER(9) PRIMARY KEY,
    DS_MODELO VARCHAR2(90) NOT NULL,
    DT_ANO NUMBER(4) NOT NULL,
    CD_MARCA NUMBER(9) NOT NULL,
    CD_TABELA_TIPO NUMBER(9) NOT NULL,
    CONSTRAINT FK_MODELO_MARCA
      FOREIGN KEY (CD_MARCA)
      REFERENCES MARCA(CD_MARCA),
    CONSTRAINT FK_MODELO_TABELA_TIPO
      FOREIGN KEY (CD_TABELA_TIPO)
      REFERENCES TABELA_TIPO(CD_TABELA_TIPO)

  );
  CREATE TABLE VEICULO(
    CD_VEICULO NUMBER(9) PRIMARY KEY,
    DS_COR VARCHAR2(25),
    DS_PLACA VARCHAR2(10) NOT NULL,
    CD_MODELO NUMBER(9) NOT NULL,
    CD_PROPRIETARIO NUMBER(9) NOT NULL,
    CONSTRAINT FK_VEICULO_MODELO
      FOREIGN KEY (CD_MODELO)
      REFERENCES MODELO(CD_MODELO),
    CONSTRAINT FK_VEICULO_PROPRIETARIO
      FOREIGN KEY (CD_PROPRIETARIO)
      REFERENCES PROPRIETARIO(CD_PROPRIETARIO)
  );
  CREATE TABLE TIPO_ESTADIA(
    CD_TIPO_ESTADIA NUMBER(9) PRIMARY KEY,
    DS_TIPO_ESTADIA VARCHAR(90) NOT NULL
  );
  CREATE TABLE ESTADIA(
    CD_ESTADIA NUMBER(9) PRIMARY KEY,
    HR_ENTRADA DATE NOT NULL,
    HR_SAIDA DATE NOT NULL,
    CD_TIPO_ESTADIA NUMBER(9),
    CD_VEICULO NUMBER(9),
    CONSTRAINT FK_ESTADIA_TIPO_ESTADIA
      FOREIGN KEY (CD_TIPO_ESTADIA)
      REFERENCES TIPO_ESTADIA(CD_TIPO_ESTADIA),
    CONSTRAINT FK_ESTADIA_VEICULO
      FOREIGN KEY (CD_VEICULO)
      REFERENCES VEICULO(CD_VEICULO)
  );


CREATE SEQUENCE SEQ_CD_PROPRIETARIO;
CREATE SEQUENCE SEQ_CD_MARCA;
CREATE SEQUENCE SEQ_CD_TABELA_TIPO;
CREATE SEQUENCE SEQ_CD_VEICULO;
CREATE SEQUENCE SEQ_CD_TIPO_ESTADIA;
CREATE SEQUENCE SEQ_CD_ESTADIA;
CREATE SEQUENCE SEQ_CD_MODELO;


CREATE OR REPLACE TRIGGER TRG_CD_PROPRIETARIO
  BEFORE INSERT
  ON PROPRIETARIO
  FOR EACH ROW
BEGIN
  :NEW.CD_PROPRIETARIO := SEQ_CD_PROPRIETARIO.NEXTVAL;
END;
/

CREATE OR REPLACE TRIGGER TRG_CD_MARCA
  BEFORE INSERT
  ON MARCA
  FOR EACH ROW
BEGIN
  :NEW.CD_MARCA := SEQ_CD_MARCA.NEXTVAL;
END;
/
CREATE OR REPLACE TRIGGER TRG_CD_TABELA_TIPO
  BEFORE INSERT
  ON TABELA_TIPO
  FOR EACH ROW
BEGIN
  :NEW.CD_TABELA_TIPO := SEQ_CD_TABELA_TIPO.NEXTVAL;
END;
/
CREATE OR REPLACE TRIGGER TRG_CD_MODELO
  BEFORE INSERT
  ON MODELO
  FOR EACH ROW
BEGIN
  :NEW.CD_MODELO := SEQ_CD_MODELO.NEXTVAL;
END;
/
CREATE OR REPLACE TRIGGER TRG_CD_VEICULO
  BEFORE INSERT
  ON VEICULO
  FOR EACH ROW
BEGIN
  :NEW.CD_VEICULO := SEQ_CD_VEICULO.NEXTVAL;
END;
/
CREATE OR REPLACE TRIGGER TRG_CD_TIPO_ESTADIA
  BEFORE INSERT
  ON TIPO_ESTADIA
  FOR EACH ROW
BEGIN
  :NEW.CD_TIPO_ESTADIA := SEQ_CD_TIPO_ESTADIA.NEXTVAL;
END;
/
CREATE OR REPLACE TRIGGER TRG_CD_ESTADIA
  BEFORE INSERT
  ON ESTADIA
  FOR EACH ROW
BEGIN
  :NEW.CD_ESTADIA := SEQ_CD_ESTADIA.NEXTVAL;
END;
/

































